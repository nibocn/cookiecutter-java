import org.apache.tools.ant.taskdefs.condition.Os

task gitExecutableHooks() {
    doLast {
        if (!Os.isFamily(Os.FAMILY_WINDOWS)) {
            Runtime.getRuntime().exec("chmod -R +x .git/hooks/")
        }
    }
}
task installGitHooks(type: Copy) {
    from new File("$rootDir/quality/hooks", 'pre-commit')
    into { new File("$rootDir", '.git/hooks') }
}

gitExecutableHooks.dependsOn installGitHooks
build.dependsOn gitExecutableHooks
